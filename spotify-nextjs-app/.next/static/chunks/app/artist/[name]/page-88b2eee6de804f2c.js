(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{1153:function(t,e,a){Promise.resolve().then(a.bind(a,3462))},3462:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var s=a(7437),n=a(2265),i=a(6414),r=a(9376),l=a(2983);function c(t){var e;let{item:a}=t,n=(0,r.useRouter)();return(0,s.jsxs)(i.E.button,{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("Clicked album:",a.name,a.type),"album"===a.type?n.push("/album/".concat(encodeURIComponent(a.name))):"featured"===a.type&&a.artist&&n.push("/album/".concat(encodeURIComponent(a.artist),"/").concat(encodeURIComponent(a.name)))},className:"card-container cursor-pointer bg-transparent border-0 text-left w-full",whileHover:{scale:1.05},transition:{duration:.2},children:[(0,s.jsx)(l.J,{src:(e=a.image)?"/api/proxy?url=".concat(encodeURIComponent(e)):"/default-album.png",alt:a.name,className:"musish-card-image"}),(0,s.jsxs)("div",{className:"musish-card-content",children:[(0,s.jsx)("h3",{className:"musish-card-title text-[var(--text-primary)]",children:a.name}),a.artist&&(0,s.jsx)("p",{className:"musish-card-subtitle text-[var(--text-secondary)]",children:a.artist})]})]})}function o(t){let{params:e}=t,a=(0,r.useRouter)(),[l,o]=(0,n.useState)(null),[m,d]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[x,h]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{let t="e540e79e4d0cd99309768db3e9d26789",s="https://ws.audioscrobbler.com/2.0";try{var n;let[a,i,r]=await Promise.all([fetch("".concat(s,"/?method=artist.getinfo&artist=").concat(e.name,"&api_key=").concat(t,"&format=json")),fetch("".concat(s,"/?method=artist.gettopalbums&artist=").concat(e.name,"&api_key=").concat(t,"&format=json&limit=12")),fetch("".concat(s,"/?method=artist.gettoptracks&artist=").concat(e.name,"&api_key=").concat(t,"&format=json&limit=10"))]),[l,c,m]=await Promise.all([a.json(),i.json(),r.json()]);console.log("Artist images:",l.artist.image);let u=null===(n=l.artist.image)||void 0===n?void 0:n.reduce((t,e)=>t&&"mega"!==e.size&&"extralarge"!==e.size?t:e,null);o({name:l.artist.name,image:(null==u?void 0:u["#text"])||"/default-artist.png",bio:l.artist.bio.summary,listeners:l.artist.stats.listeners,playcount:l.artist.stats.playcount}),d(c.topalbums.album.map(t=>{var e,a;return{name:t.name,image:(null===(e=t.image.find(t=>"large"===t.size))||void 0===e?void 0:e["#text"])||(null===(a=t.image.find(t=>"medium"===t.size))||void 0===a?void 0:a["#text"])||"/default-album.png",playcount:parseInt(t.playcount)}})),p(m.toptracks.track.map(t=>({name:t.name,playcount:t.playcount,duration:t.duration}))),h(!1)}catch(t){console.error("Error:",t),h(!1),a.push("/")}})()},[e.name,a]),x)?(0,s.jsx)("div",{className:"musish-container flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-[var(--text-primary)] text-xl animate-pulse",children:"Loading artist..."})}):l?(0,s.jsxs)("div",{className:"artist-page-container",children:[(0,s.jsx)("header",{className:"artist-header",children:(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,s.jsx)("h1",{className:"artist-name",children:null==l?void 0:l.name}),(0,s.jsxs)("div",{className:"artist-stats",children:[parseInt((null==l?void 0:l.listeners)||"0").toLocaleString()," monthly listeners"]})]})}),(0,s.jsxs)("main",{className:"artist-content",children:[(0,s.jsxs)("section",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[var(--text-primary)] mb-6",children:"Top Songs"}),(0,s.jsx)("div",{className:"space-y-2 max-w-4xl",children:u.slice(0,5).map((t,e)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*e},className:"flex items-center p-4 hover:bg-[var(--background-secondary)] rounded-lg transition-colors group",children:[(0,s.jsx)("span",{className:"text-[var(--text-secondary)] w-8",children:e+1}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-[var(--text-primary)] font-medium",children:t.name}),(0,s.jsxs)("div",{className:"text-[var(--text-secondary)] text-sm",children:[parseInt(t.playcount).toLocaleString()," plays"]})]}),(0,s.jsx)("button",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-[var(--accent-color)] text-white p-2.5 rounded-full shadow-lg hover:scale-105",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M8 5v14l11-7z"})})})]},t.name))})]}),(0,s.jsxs)("section",{className:"mt-16",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[var(--text-primary)] mb-6",children:"Albums"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:m.map(t=>(0,s.jsx)(c,{item:{...t,type:"album"}},t.name))})]})]})]}):null}},2983:function(t,e,a){"use strict";a.d(e,{J:function(){return r}});var s=a(7437),n=a(2265),i=a(3145);let r=t=>{let{src:e,alt:a,className:r="",isArtist:l=!1,priority:c=!1}=t,[o,m]=(0,n.useState)(e),[d,u]=(0,n.useState)(!0),p=l?"/default-artist.png":"/default-album.png";return(0,n.useEffect)(()=>{m(e),u(!0)},[e]),(0,s.jsxs)("div",{className:"relative ".concat(r),children:[(0,s.jsx)(i.default,{src:o,alt:a,width:500,height:500,priority:c,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(d?"opacity-0":"opacity-100"),onLoad:()=>u(!1),onError:()=>{m(p),u(!1)}}),d&&(0,s.jsx)("div",{className:"absolute inset-0 bg-[var(--background-secondary)] animate-pulse rounded-lg"})]})}}},function(t){t.O(0,[785,414,971,117,744],function(){return t(t.s=1153)}),_N_E=t.O()}]);